<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head}">
    <title>MoveDB</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="nav-container" th:replace="~{fragments/navigation :: navigation}"></div>

<div class="container-fluid content-section">
    <div class="container">
        <div class="row">
            <h3 class="mt-3 text-decoration-none text-white fw-bold mb-3">Latest Movie</h3>
            <div class="col-md-6">
                <iframe width="560" height="315" th:src="@{'https://www.youtube.com/embed/' + ${newestMovie.videoURL}}" allowfullscreen></iframe>
            </div>
            <div class="col-md-6 d-flex flex-column latest-info">
                <a th:href="@{'/movies/' + ${newestMovie.id}}" class="text-white text-decoration-none">
                    <h3 class="m-0" th:text="${newestMovie.title}"></h3>
                </a>

                <p class="latest-rating">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff6600" class="bi bi-star-fill" viewBox="0 0 16 16">
                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                    <span class="rating-text" th:text="${newestMovie.rating}"></span>
                </p>
                <span class="mb-3">Date: [[${newestMovie.getReleaseDate}]]</span>
                <h6 class="mb-3" th:text="${newestMovie.getDescription}"></h6>
                <div class="categories-container">
                    <div th:each="c : ${newestMovie.category}">
                        <h4><a class="button-6" th:href="@{'/categories/' + ${c.id}}" th:text="${c.categoryName}"></a></h4>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <h3 class="mt-3 text-decoration-none text-white fw-bold mb-3">Best Movies</h3>
            <div class="col-md-2 mb-4" th:each="movie : ${bestMoviesLimited}">
                <div class="card">
                    <a th:href="@{'/movies/' + ${movie.id}}">
                        <img th:src="@{'/uploads/' + ${movie.imageURL}}" class="card-img-top" alt="Movie Image">
                    </a>
                    <div class="card-body">
                        <p class="card-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff6600" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            <span class="rating-text" th:text="${movie.rating}"></span>
                        </p>
                        <h5 class="card-title" th:text="${movie.title}"></h5>
                    </div>
                </div>
            </div>

            <div class="category">
                <a th:href="@{'/movies/bestMovies'}" class="category-name see-more">See More</a>
            </div>
        </div>

        <div class="row">
            <h3 class="mt-3 text-decoration-none text-white fw-bold mb-3">Best Series</h3>
            <div class="col-md-2 mb-4" th:each="series : ${bestSeriesLimited}">
                <div class="card">
                    <a th:href="@{'/series/' + ${series.id}}">
                        <img th:src="@{'/uploads/' + ${series.imageURL}}" class="card-img-top" alt="Series Image" src="series img">
                    </a>
                    <div class="card-body">
                        <p class="card-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff6600" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            <span class="rating-text" th:text="${series.rating}"></span>
                        </p>
                        <h5 class="card-title" th:text="${series.title}"></h5>
                    </div>
                </div>
            </div>
            <div class="category">
                <a th:href="@{'/series/bestSeries'}" class="category-name see-more">See more</a>
            </div>
        </div>

        <div class="row">
            <h3 class="mt-3 text-decoration-none text-white fw-bold mb-3">Choose what to watch</h3>
            <div class="categories-container">
                <div class="category " th:each="category : ${categories}">
                    <a th:href="@{'/categories/' + ${category.id}}" class="category-name" th:text="${category.categoryName}"></a>
                </div>
            </div>
        </div>

        <div class="row">
            <h3 class="mt-3 text-decoration-none text-white fw-bold mb-3">From your Watchlist</h3>

            <div class="row justify-content-center align-items-center" th:if="${watchlistMovies == null || watchlistMovies.isEmpty()}">
                <div class="col text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16">
                        <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z"/>
                    </svg>
                </div>
            </div>
            <div class="row justify-content-center align-items-center" th:if="${watchlistMovies == null || watchlistMovies.isEmpty()}">
                <div class="col text-center">
                    <span class="text-white" style="font-size: 20px;">Save movies and series to keep track of what you want to watch.</span>
                </div>
            </div>
            <div class="row justify-content-center align-items-center" th:if="${watchlistMovies == null || watchlistMovies.isEmpty()}">
                <div class="col text-center ">
                    <a th:href="@{/movies/allMovies}" class="text-white">Browse popular movies</a>
                </div>
            </div>
            <div class="row justify-content-center align-items-center" th:if="${watchlistMovies == null || watchlistMovies.isEmpty()}">
                <div class="col text-center">
                    <a th:href="@{/series/allSeries}" class="text-white">Browse popular tv series</a>
                </div>
            </div>


            <div class="row" th:if="${watchlistMovies != null && !watchlistMovies.isEmpty()}">
                <div class="col-md-2 mb-4" th:each="movie, iterStat : ${watchlistMovies}" th:if="${iterStat.index < 6}">
                    <div class="card">
                        <a th:href="@{'/movies/' + ${movie.id}}">
                            <img th:src="@{'/uploads/' + ${movie.imageURL}}" class="card-img-top" alt="Movie Image">
                        </a>
                        <div class="card-body">
                            <p class="card-text">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff6600" class="bi bi-star-fill" viewBox="0 0 16 16">
                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                </svg>
                                <span class="rating-text" th:text="${movie.rating}"></span>
                            </p>
                            <h5 class="card-title" th:text="${movie.title}"></h5>
                        </div>
                    </div>
                </div>
                <div class="category">
                    <a th:href="@{'/movies/watchlist-movie'}" class="category-name see-more">See more</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <footer th:replace="~{fragments/footer :: footer}"></footer>
</div>

</body>
</html>